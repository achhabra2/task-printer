{% extends "base.html" %} {% block content %}
<div
    class="max-w-md mx-auto mt-14 p-8 bg-white dark:bg-slate-800 rounded-2xl shadow-lg text-center"
>
    <div class="spinner mx-auto mb-4"></div>
    <div class="text-lg">Saving settings and restarting appâ€¦</div>
    <div class="mt-4 text-sm text-slate-500 dark:text-slate-300">
        This page will refresh automatically.<br />If the app does not load
        after 10 seconds, please refresh the page.
    </div>
</div>
<script>
    setTimeout(function() {
        function getCookie(name){ const m = document.cookie.match(new RegExp('(^| )'+name+'=([^;]+)')); return m ? m[2] : null; }
        const csrf = getCookie('csrf_token');
        fetch('/restart', {method: 'POST', headers: {'Content-Type': 'application/json', 'X-CSRFToken': csrf}, body: JSON.stringify({'auto_startup': {{ auto_startup|tojson }} })});
    }, 10000);
</script>
<meta http-equiv="refresh" content="10;url=/" />
{% endblock %}
