{% extends "base.html" %}
{% block content %}
<style>
.centered-card { text-align: center !important; }
</style>
<div class="centered-card">
  <div class="spinner"></div>
  <div style="font-size:1.2em;">Saving settings and restarting appâ€¦</div>
  <div style="margin-top:18px;font-size:0.97em;color:#888;">This page will refresh automatically.<br>If the app does not load after 10 seconds, please refresh the page.</div>
</div>
<script>
setTimeout(function() {
    function getCookie(name){ const m = document.cookie.match(new RegExp('(^| )'+name+'=([^;]+)')); return m ? m[2] : null; }
    const csrf = getCookie('csrf_token');
    fetch('/restart', {method: 'POST', headers: {'Content-Type': 'application/json', 'X-CSRFToken': csrf}, body: JSON.stringify({'auto_startup': {{ auto_startup|tojson }} })});
}, 10000);
</script>
<meta http-equiv="refresh" content="10;url=/" />
{% endblock %} 
